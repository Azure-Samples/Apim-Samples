@startuml "Azure Application Gateway, API Management & Container Apps Architecture"

!include ./base.puml

title Azure Application Gateway, API Management & Container Apps Architecture

' Main components
AzureApplicationGateway(appgw, "Application Gateway (WAF)", "")
AzureAPIManagement(apim, "API Management", "")
AzureContainerApp(aca, "Container Apps", "")
AzureApplicationInsights(appinsights, "Application Insights", "")
AzureLogAnalyticsWorkspace(loganalytics, "Log Analytics", "")

' Custom components
collections "Apps" as apps #LightBlue

' Relationships
apps --> appgw : "API Consumers"
appgw --> apim : "Routes traffic (via Private Endpoint)"
apim --> aca : "Backend"
apim -right-> appinsights : "\nSends\ntelemetry\n"
appinsights -down-> loganalytics : "Stores data"

@enduml

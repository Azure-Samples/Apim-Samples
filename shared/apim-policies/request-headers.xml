<!--
    This policy sample demonstrates the listing of all inbound HTTP headers,
    which can be a bit more straight-forward than setting up a trace.

    CAUTION: This returns all header names and values. It is useful for
    development and troubleshooting, but may expose sensitive information such
    as tokens, cookies, subscription keys, or Authorization headers. Use with
    care and consider masking sensitive headers or restricting access in
    non-development environments.
-->
<policies>
    <inbound>
        <base />
        <return-response>
            <set-status code="200" reason="OK" />
            <set-body>
                @{
                    var headers = context.Request.Headers
                        .OrderBy(h => h.Key)
                        .Select(h => $"{h.Key}: {h.Value[0]}");
                    return string.Join("\n", headers);
                }
            </set-body>
        </return-response>
    </inbound>
    <backend>
        <base />
    </backend>
    <outbound>
        <base />
    </outbound>
    <on-error>
        <base />
    </on-error>
</policies>
